<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        h1,
        div {
            text-align: center;
            margin: 10px;
        }

        .p3 {
            font-size: 32px;
            display: inline;
            float: left;
            width: 30%;
            height: 100%;
            border: 1px;
        }

        img {
            width: 120px;
            height: 80px;
            margin: 0;
        }

        .point {
            width: 20px;
            height: 30px;
        }
    </style>
    <mata charset="UTF-8"></mata>
    <title>桃園機場捷運的票價跟時間圖</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <h1 id="title">
        <div class="p3">時間</div>
        <div class="p3">路線</div>
        <div class="p3">票價</div>
    </h1>
</body>

<script>
    var dataUrl = "https://ptx.transportdata.tw/MOTC/v2/Rail/Metro/ODFare/TYMC?%24top=420&%24format=JSON";
    var data = $.getJSON(dataUrl);

    station = ["#A1", "#A2", "#A3", "#A4", "#A5", "#A6", "#A7", "#A8", "#A9", "#A10", "#A11", "#A12", "#A13", "#A14", "#A15", "#A16", "#A17", "#A18", "#A19", "#A20", "#A21"];

    data.done(function (msg) {
        console.log(msg);
        mLong = msg.length;
        console.log(mLong);

        for (var i = 419; i >= 0; i -= 21) {
            console.log(msg[i].OriginStationID + "To" + msg[i].DestinationStationID + "Time: " + msg[i].TravelTime + "Price: " + msg.Fares[0] + "i=" + i);
            console.log((i + 22) / 21);
            $('<h1 id=station' + (i + 22) / 21 + '><img src="img/A' + (i + 22) / 21 + '.png"></h1>').insertAfter("#title");
            $('<h1 id=s' + (i + 22) / 21 + '></h1>').insertAfter("#title");
            $(station[(i + 22) / 20]).prepend('<div class="p3" id=A' + (i + 22) / 21 + '>' + msg[i].Fares[0].Price + '</div>');
            $(station[(i + 22) / 20]).prepend('<div class="p3"><img class="point"src=img/p.png></div>');
            $(station[(i + 22) / 20]).prepend('<div class="p3" id=A' + (i + 22) / 21 + '>' + msg[i].TravelTime + '</div>');
        }

        $('<h1 id=A1><img src="img/A1.png"></h1>').insertAfter("#title");
    });

    data.fail(function (msg) {
        console.log(msg);
        $("#contain").html("It is fail.");
    });


</script>

</html>